<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Confirmar Consulta</title>
    <link rel="stylesheet" href="cabecario.css">
    <link rel="stylesheet" href="confirmacao.css">
</head>

<body>
    <!-- ------------------------------Cabecario---------------------------------------------->
    <header id="cabecario">
        <img src="../imagens/logo.png" id="logo" alt="Logo do Hospital">

        <div id="login">
            <div class="perfil">
                <img src="https://cdn-icons-png.flaticon.com/512/1946/1946429.png" alt="Ícone do perfil">

                <ul class="submenu">
                    <li><a href="confirmacao.html?origem=modificaPagina" onclick="mudificaPagina()">Consultas
                            marcadas</a></li>
                    <li><a href="../Login/altera-cadastro.html">Alterar Cadastro</a></li>
                    <li><a href="#">Sair</a></li>
                </ul>
            </div>

            <div class="links">
                <a href="../Login/login.html" id="login-entra">Entrar</a> /
                <a href="../Login/cadastro.html">Cadastrar-se</a>
            </div>
        </div>

    </header>

    <div id="texto">
        <h1 id="mudaTexto">Confirme sua Consulta</h1>
    </div>

    <!-- ----------------------------Confirmação de Consulta---------------------------------->
    <div class="caixa-confirmacao">
                                               
        <div id="esq">
            <h3>Paciente</h3>  
            <div label-input>
                <label>Nome:</label>
                <input type="text" id="nome" readonly>
            </div>
            <div label-input>
                <label>CPF:</label>
                <input type="text" id="cpf"  readonly>
            </div>
            <div label-input>
                <label>Data de Nascimento:</label>
                <input type="text" id="dataNascimento" readonly>
            </div>
            <div label-input>
                <label>Telefone:</label>
                <input type="text" id="telefone" readonly>
            </div>
        </div>

        <div id="cen">
            <h3>Médico</h3>
            <div label-input>
                <label>Nome:</label>
                <input type="text" value="Dr. Fulano de Tal" readonly>
            </div>
            <div label-input>
                <label>Especialidade:</label>
                <input type="text" value="Especialidade" readonly>
            </div>
            <div label-input>
                <label>CRM:</label>
                <input type="text" id="info" value="000000" readonly>
            </div>
        </div>

        <div id="dir">
            <h3>Informações da Consulta</h3>
            <div label-input>
                <label>Hospital:</label>
                <input type="text" value="Nome do Hospital" readonly>
            </div>
            <div label-input>
                <label>Cidade:</label>
                <input type="text" value="Cidade - PI" readonly>
            </div>
            <div id="lado">
                <div label-input>
                    <label>Horário:</label>
                    <input type="text" value="00:00" readonly>
                </div>
                <div label-input>
                    <label>Data:</label>
                    <input type="text" value="00/00/0000" readonly>
                </div>
            </div>
            <div label-input>
                <label>Endereço:</label>
                <input type="text" id="reu" value="Rua Projetada" readonly>
            </div>

        </div>

        <div id="div-botao">
            <button id="botao" onclick="window.location.href='marcar_consulta.html'">Voltar</button>
            <button id="botao-confirmar">Confirmar</button>
        </div>
    </div>
    <!-- Modal Personalizado -->
    <!-- Modal Personalizado -->
    <div id="modal" class="modal">
        <div class="modal-conteudo">
            <h4 id="modal-titulo">Sucesso!</h4>
            <p id="modal-mensagem">Consulta confirmada com sucesso!</p>
            <button id="modal-ok">OK</button>
        </div>
    </div>

    <script src="confirmacao.js"></script>

    <script src="confirmacao.js"></script>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const paciente = JSON.parse(localStorage.getItem("pacienteLogado"));

    if (paciente) {
        // ---------- Função para formatar CPF ----------
        function formatarCPF(cpf) {
            cpf = cpf.replace(/\D/g, ""); // remove tudo que não é número
            if (cpf.length === 11) {
                return cpf.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, "$1.$2.$3-$4");
            }
            return cpf;
        }

        // ---------- Função para formatar data ----------
        function formatarData(data) {
            if (!data) return "";
            const partes = data.split("-");
            if (partes.length === 3) {
                return `${partes[2]}/${partes[1]}/${partes[0]}`; // dd/mm/yyyy
            }
            return data;
        }

        // ---------- Função para formatar telefone ----------
        function formatarTelefone(telefone) {
            telefone = telefone.replace(/\D/g, ""); // remove tudo que não é número
            if (telefone.length === 10) {
                // formato (99) 9999-9999
                return telefone.replace(/(\d{2})(\d{4})(\d{4})/, "($1) $2-$3");
            } else if (telefone.length === 11) {
                // formato (99) 99999-9999
                return telefone.replace(/(\d{2})(\d{5})(\d{4})/, "($1) $2-$3");
            }
            return telefone;
        }

        // ---------- Preenche os campos na página ----------
        document.getElementById("nome").value = paciente.nome || "";
        document.getElementById("cpf").value = formatarCPF(paciente.cpf || "");
        document.getElementById("dataNascimento").value = formatarData(paciente.dataNascimento || "");
        document.getElementById("telefone").value = formatarTelefone(paciente.telefone || "");
    }
});
</script>

</body>

</html>